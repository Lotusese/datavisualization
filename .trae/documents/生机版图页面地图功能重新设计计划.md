## 生机版图页面地图功能重新设计计划

### 需求分析
重新设计生机版图页面的地图功能，实现县域脱贫情况随着时间推移逐渐点亮的效果，增强视觉表现力和用户体验。

### 设计思路
1. **恢复适当的动画效果**：使用带有渐入动画的散点图，实现点的"点亮"效果
2. **实现分批进入动画**：根据时间线进度，分批显示脱贫县，模拟"逐渐点亮"过程
3. **优化动画参数**：控制动画持续时间和延迟，避免性能问题
4. **增强视觉效果**：添加脉动效果和直观的颜色变化
5. **保持性能优化**：继续使用数据采样，控制同时显示的点数

### 实施步骤

1. **修改图表类型**：
   - 将scatter替换为带有动画效果的effectScatter
   - 优化effectScatter的参数，确保性能流畅

2. **实现渐入动画**：
   - 为每个数据点添加animationDelay，实现分批进入效果
   - 根据脱贫年份设置不同的进入时间
   - 控制动画持续时间，确保视觉流畅

3. **优化数据处理**：
   - 保持数据采样，最多显示300个点
   - 根据时间线进度动态调整显示的数据
   - 为数据点添加进入状态标记

4. **增强视觉设计**：
   - 添加点的脉动效果，增强"点亮"感觉
   - 使用更直观的颜色渐变，从暗到亮
   - 优化图例和说明文字

5. **优化交互体验**：
   - 增强时间轴与地图的联动
   - 添加平滑过渡效果
   - 优化控制面板设计

### 具体实现

1. **修改ECharts配置**：
   - 文件：components/MapDashboard.tsx
   - 位置：getOption函数
   - 修改series.type为effectScatter
   - 添加适当的animation参数

2. **实现分批进入逻辑**：
   - 修改数据处理逻辑，为每个点添加animationDelay
   - 根据时间线进度计算点的显示状态
   - 实现平滑的动画过渡

3. **优化动画参数**：
   - animationDuration：2000ms
   - animationDelay：根据脱贫年份动态计算
   - animationEasing：'cubicOut'
   - rippleEffect：适当调整参数，增强视觉效果

4. **测试优化效果**：
   - 运行项目，检查动画效果
   - 验证性能表现
   - 确保功能完整性

### 预期效果
- 地图上的脱贫县随着时间推移逐渐点亮
- 每个点都有平滑的进入动画
- 视觉效果增强，用户体验更好
- 保持良好的性能，不出现卡顿
- 时间轴与地图联动更加直观

### 技术要点
- 使用ECharts的animationDelay实现分批进入
- 优化effectScatter的参数，平衡效果和性能
- 动态计算数据点的显示状态
- 保持数据采样，控制渲染负担
- 增强视觉设计，提升用户体验